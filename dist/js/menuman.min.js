function MenuMan(t){var e=this;this.menuBoardEl,this.menuBoards={},this.menus={},this.nowSelectedObjId="",this.nowSelectedElement,this.isShown=!1,this.theme,this.target,this.lastPosX,this.lastPosY,window.addEventListener("contextmenu",function(t){e.handleOpenContextMenu(t)}),window.addEventListener("mousedown",function(t){e.handleCloseContextMenu(t)})}window.getNewEl=function(t,e,n,i,r,o,s){var a=document.createElement(t);e&&(a.id=e),n&&a.setAttribute("class",n);for(var u in i)a.setAttribute(u,i[u]);return r&&(a.innerHTML=r),o&&getEl(a).addEventListener(o,function(t){s(t)}),a},window.getEl=function(t){var e="object"==typeof t?t:document.getElementById(t);return this.obj=e,this.attr=function(t,n){return n?(e.setAttribute(t,n),this):e.getAttribute(t)},this.clas=function(){var t={has:function(t){return e.className.indexOf(t)!=-1},add:function(n){return e.classList?e.classList.add(n):e.className+=" "+n+" ",t},remove:function(n){if(e.classList)e.classList.remove(n);else{for(var i=e.className.split(" ");i.indexOf(n)!=-1;)i.splice(i.indexOf(n),1);e.className=i.join(" ")}return t}};return t}(),this.add=function(t){return"object"==typeof t?e.appendChild(t):e.innerHTML+=t,this},this.addln=function(t){return"object"==typeof t?e.appendChild(t):e.innerHTML+=t?t:"",e.appendChild(document.createElement("br")),this},this.hasEventListener=function(t){return e.hasEventListener(t)},this.removeEventListener=function(t,n){return e.removeEventListener(t,n),this},this.addEventListener=function(t,n){navigator.userAgent.indexOf("Firefox")!=-1&&e.addEventListener(t,function(t){window.event=t},!0),e.addEventListener?e.addEventListener(t,function(t){n(t)}):e.attachEvent("on"+t,function(t){!t.target&&t.srcElement&&(t.target=t.srcElement),n(t)})},this.del=function(t){return e.removeChild(t),this},this.html=function(t){return e.innerHTML=t,this},this.clear=function(){return e.innerHTML="",this},this.scrollDown=function(){return e.scrollTop=e.scrollHeight,this},this.disableSelection=function(){return"undefined"!=typeof e.ondragstart&&(e.ondragstart=function(){return!1}),"undefined"!=typeof e.onselectstart&&(e.onselectstart=function(){return!1}),"undefined"!=typeof e.oncontextmenu&&(e.oncontextmenu=function(){return!1}),"undefined"!=typeof e.style.MozUserSelect&&(document.body.style.MozUserSelect="none"),this},this.hideDiv=function(){return e.style.display="block",e.style.position="absolute",e.style.left="-5555px",e.style.top="-5555px",this},this.showDiv=function(){return e.style.display="block",e.style.position="absolute",e.style.left="0px",e.style.top="0px",this},this.getNewSeqId=function(t){for(var n=1;n<5e4;n++){var i=t+n;if(!(i in e))return i}return null},this.isAccepted=function(t,e){var n=!1;return t?this.find(t)&&(n=!0):n=!0,e&&this.find(e)&&(n=!1),n},this.find=function(t){if(e instanceof Array){for(var n=[],i=0;i<e.length;i++){var r=this.getMatchedObjWithParam(e[i],t);r&&n.push(r)}return n}if(e instanceof Object){var r=this.getMatchedObjWithParam(e,t);return r}},this.getMatchedObjWithParam=function(t,e){if("string"==typeof e&&(e={id:e}),e instanceof Array){for(var n=0;n<e.length;n++)if(this.find(e[n]))return t}else if(e instanceof Object){for(var i=Object.keys(e),n=0;n<i.length;n++){var r=i[n];if(!t[r]||t[r]!=e[r])return}return t}},this.findDomDataAttribute=function(t){if(e instanceof Array){for(var n=[],i=0;i<e.length;i++){var r=this.getMatchedDomWithParam(e[i],t);r&&n.push(r)}return n}if(e instanceof Object){var r=this.getMatchedDomWithParam(e,t);return r}},this.getMatchedDomWithParam=function(t,e){if("string"==typeof e&&(e={id:e}),e instanceof Array){for(var n=0;n<e.length;n++)if(this.findDomDataAttribute(e[n]))return t}else if(e instanceof Object){for(var i=Object.keys(e),r="data-",n=0;n<i.length;n++){var o=i[n];if(!t.getAttribute(r+o)||t.getAttribute(r+o)!=e[o])return}return t}},this.getParentEl=function(t){for(var n=e;n&&void 0==n.getAttribute(t);)n=n.parentNode;return n},this.findEl=function(t,n){for(var i=e.children,r=0;r<i.length;r++)if(i[r].getAttribute(t)==n)return i[r]},this.findParentEl=function(t,n){for(var i,r=e;r;){if(r==document.body.parentNode){i=null;break}if(r.getAttribute(t)==n){i=r;break}r=r.parentNode}return i},this},window.getData=function(t){var t=t;return this.parse=function(){if(t){var e=t.substr(0,1),n=t.substr(t.length-1,1);if("string"==typeof t){if("{"==e&&"}"==n)return JSON.parse(t);if("["==e&&"]"==n)return JSON.parse(t);if(t.indexOf(",")!=-1){for(var i=t.split(","),r=0;r<i.length;r++)i[r]=i[r].trim();return i}}return t}},this},function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var i=(new Date).getTime(),r=Math.max(0,16-(i-t)),o=window.setTimeout(function(){e(i+r)},r);return t=i+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(){window.URL=window.URL||window.webkitURL,window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder}(),function(){navigator.userAgent.indexOf("Firefox")!=-1&&window.addEventListener(eventNm,function(t){window.event=t},!0),!window.addEventListener&&window.attachEvent&&(window.addEventListener=function(t,e){window.attachEvent("on"+t,function(t){!t.target&&t.srcElement&&(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){}),t.stopPropagation||(t.stopPropagation=function(){t.returnValue=!1,t.cancelBubble=!0}),e(t)})})}(),function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1})}(),function(){document.querySelectorAll||document.getElementsByTagName&&(document.querySelectorAll=function(){var t,e=selector.indexOf("["),n=selector.indexOf("]"),i=[];if(e!=-1&&n!=-1){t=selector.substring(e+1,n);for(var r=["div","span","form","input","select","textarea"],o=0;o<r.length;o++)for(var s=document.getElementsByTagName(r[o]),a=0;a<s.length;a++)void 0!=s[a].getAttribute(t)&&i.push(s[a])}return i})}(),function(){window.getComputedStyle||(window.getComputedStyle=function(t){return t.currentStyle})}(),function(){JSON||(JSON.stringify=JSON.stringify||function(t){var e=typeof t;if("object"!=e||null===t)return"string"==e&&(t='"'+t+'"'),String(t);var n,i,r=[],o=t&&t.constructor==Array;for(n in t)i=t[n],e=typeof i,"string"==e?i='"'+i+'"':"object"==e&&null!==i&&(i=JSON.stringify(i)),r.push((o?"":'"'+n+'":')+String(i));return(o?"[":"{")+String(r)+(o?"]":"}")},JSON.parse=JSON.parse||function(str){return""===str&&(str='""'),eval("var p="+str+";"),p})}(),MenuMan.prototype.setTheme=function(t){return this.theme=t,this},MenuMan.prototype.addMenuBoard=function(t,e,n){return this.menuBoards[t]={conObj:e,menus:n},this},MenuMan.prototype.addMenu=function(t,e){return this.menus[t]={el:this.getNewMenuEl(t),func:e},this},MenuMan.prototype.handleOpenContextMenu=function(t){var e=this.menuBoards;if(!(t.which&&3==t.which||t.button&&2==t.button))return!1;t.preventDefault(),t.stopPropagation(),this.setPos(t);for(var n in e){var i=e[n];if(this.isMatch(this.target,i.conObj))return this.nowSelectedElement=this.target,void this.showMenuBoard(i.menus)}},MenuMan.prototype.handleCloseContextMenu=function(){if(this.menuBoardEl){for(var t=this.menuBoardEl;t.firstChild;)t.removeChild(t.firstChild);this.menuBoardEl.style.display="none"}this.nowSelectedObjId="",this.isShown=!1},MenuMan.prototype.setPos=function(t){this.target=t.target,this.lastPosX,this.lastPosY,void 0!=t.touches?(this.lastPosX=t.touches[0].pageX,this.lastPosY=t.touches[0].pageY):(this.lastPosX=t.clientX,this.lastPosY=t.clientY),void 0!=t.touches?(timerTime>=3&&t.preventDefault(),this.target=t.touches[0].target):(t.preventDefault(),this.target=t.target)},MenuMan.prototype.isMatch=function(t,e){var n=!1;return n=getEl(t).find(e),n=getEl(t).findDomDataAttribute(e)},MenuMan.prototype.showMenuBoard=function(t){this.menus;this.menuBoardEl||(this.menuBoardEl=getNewEl("div","","menuman-menu-board",{},""));var e=this.menuBoardEl;this.theme||(this.theme="none"),e.setAttribute("data-theme",this.theme);for(var n=0;n<t.length;n++){var i=t[n],r=this.menus[i];getEl(e).add(r.el)}e&&(this.isShown=!0,e.style.display="block",e.style.position="absolute",e.style.left=this.lastPosX+12+"px",e.style.top=this.lastPosY+2+"px",getEl(document.body).add(e))},MenuMan.prototype.getNewMenuEl=function(t){var e=this,n=getNewEl("div","","menuman-menu",{},t);return n.addEventListener("mousedown",function(n){n.preventDefault(),n.stopPropagation();var i=e.nowSelectedElement;e.handleCloseContextMenu(),e.menus[t].func(i)}),n};