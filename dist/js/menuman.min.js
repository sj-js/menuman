function t(t){var e=this;this.menuBoardEl,this.menuBoards={},this.menus={},this.nowSelectedObjId="",this.nowSelectedElement,this.isShown=!1,this.theme,this.target,this.lastPosX,this.lastPosY,window.addEventListener("contextmenu",function(t){e.handleOpenContextMenu(t)}),window.addEventListener("mousedown",function(t){e.handleCloseContextMenu(t)})}t.prototype.setTheme=function(t){return this.theme=t,this},t.prototype.addMenuBoard=function(t,e,n){return this.menuBoards[t]={conObj:e,menus:n},this},t.prototype.addMenu=function(t,e){return this.menus[t]={el:this.getNewMenuEl(t),func:e},this},t.prototype.handleOpenContextMenu=function(t){var e=this.menuBoards;if(!(t.which&&3==t.which||t.button&&2==t.button))return!1;t.preventDefault(),t.stopPropagation(),this.setPos(t);for(var n in e){var s=e[n];if(this.isMatch(this.target,s.conObj))return this.nowSelectedElement=this.target,void this.showMenuBoard(s.menus)}},t.prototype.handleCloseContextMenu=function(){if(this.isShown&&this.menuBoardEl){for(var t=this.menuBoardEl;t.firstChild;)t.removeChild(t.firstChild);t.style.zIndex=0,t.style.display="none"}this.nowSelectedObjId="",this.isShown=!1},t.prototype.setPos=function(t){this.target=t.target,this.lastPosX,this.lastPosY,void 0!=t.touches?(this.lastPosX=t.touches[0].pageX,this.lastPosY=t.touches[0].pageY):(this.lastPosX=t.clientX,this.lastPosY=t.clientY),void 0!=t.touches?(timerTime>=3&&t.preventDefault(),this.target=t.touches[0].target):(t.preventDefault(),this.target=t.target)},t.prototype.isMatch=function(t,e){var n=!1;return n=getEl(t).findDomAttribute(e)},t.prototype.showMenuBoard=function(t){var e=this;this.menus;this.isShown&&e.handleCloseContextMenu(),this.menuBoardEl||(this.menuBoardEl=getNewEl("div","","menuman-menu-board",{},""));var n=this.menuBoardEl;this.theme||(this.theme="none"),n.setAttribute("data-theme",this.theme);for(var s=0;s<t.length;s++){var o=t[s],i=this.menus[o];getEl(n).add(i.el)}n&&(this.isShown=!0,n.style.display="block",n.style.position="absolute",n.style.left=this.lastPosX+12+"px",n.style.top=this.lastPosY+2+"px",n.style.zIndex=getData().findHighestZIndex(["div"])+1,getEl(document.body).add(n))},t.prototype.getNewMenuEl=function(t){var e=this,n=getNewEl("div","","menuman-menu",{},t);return n.addEventListener("mousedown",function(n){n.preventDefault(),n.stopPropagation();var s=e.nowSelectedElement;e.handleCloseContextMenu(),e.menus[t].func(s)}),n};